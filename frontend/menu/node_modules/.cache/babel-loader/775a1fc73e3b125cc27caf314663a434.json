{"ast":null,"code":"var _jsxFileName = \"/home/adolfo/menu_app/frontend/menu/src/pages/UserLogin.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport loginUser from \"../services/loginUser.js\";\nimport getUserData from \"../services/user/getUserData\";\nimport { Context } from \"../context/userContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst UserLogin = () => {\n  _s();\n\n  const [username, setUserName] = useState(null);\n  const [password, setPassword] = useState(null);\n  const [errorText, setErrorText] = useState(\"\");\n  const {\n    token,\n    csfrToken,\n    userLoggedId\n  } = useContext(Context);\n  const [tokenValue, setTokenValue] = token;\n  const [csfrTokenValue, setCsfrTokenValue] = csfrToken;\n  const [userLoggedIdValue, setUserLoggedData] = userLoggedId;\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    await loginUser({\n      username,\n      password\n    }).then(data => {\n      if (data.error) {\n        return setErrorText(data.error);\n      }\n\n      console.log(data);\n      window.localStorage.setItem('logedUserToken', data.key);\n      setTokenValue(data.key);\n      getUserData(username).then(data => {\n        console.log(data);\n        let logedUserId = \"\";\n\n        for (let i = 0; i <= data.length; i++) {\n          console.log(data[i]);\n          let ApiUsername = data[i]['username'];\n          console.log(ApiUsername);\n\n          if (username.toLowerCase() === ApiUsername.toLowerCase()) {\n            logedUserId = data[i]['id'];\n            window.localStorage.setItem('logedUserId', logedUserId);\n            break;\n          }\n        }\n\n        setUserLoggedData(data[0]);\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-form\",\n    z: true,\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"login-form-form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"User Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          onChange: e => setUserName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          onChange: e => setPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\" \", errorText]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }, this), tokenValue && /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 32\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 13\n  }, this);\n};\n\n_s(UserLogin, \"z8Oirm5CkLTRxGj5AlGXmDgxg6Q=\");\n\n_c = UserLogin;\nexport default UserLogin;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserLogin\");","map":{"version":3,"names":["React","useState","useContext","Navigate","loginUser","getUserData","Context","UserLogin","username","setUserName","password","setPassword","errorText","setErrorText","token","csfrToken","userLoggedId","tokenValue","setTokenValue","csfrTokenValue","setCsfrTokenValue","userLoggedIdValue","setUserLoggedData","handleSubmit","e","preventDefault","then","data","error","console","log","window","localStorage","setItem","key","logedUserId","i","length","ApiUsername","toLowerCase","target","value"],"sources":["/home/adolfo/menu_app/frontend/menu/src/pages/UserLogin.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport loginUser from \"../services/loginUser.js\"\nimport getUserData from \"../services/user/getUserData\"\nimport { Context } from \"../context/userContext\"\n\nconst UserLogin = () => {\n\n    const [username, setUserName] = useState(null);\n    const [password, setPassword] = useState(null);\n    const [errorText, setErrorText] = useState(\"\")\n\n    const {token, csfrToken, userLoggedId} = useContext(Context)\n\n    const [tokenValue, setTokenValue] = token\n    const [csfrTokenValue, setCsfrTokenValue] = csfrToken\n    const [userLoggedIdValue, setUserLoggedData] = userLoggedId\n    \n    const handleSubmit = async e => {\n        e.preventDefault();\n\n        await loginUser({\n            username,\n            password\n        })\n        .then((data) => {\n            if (data.error){\n                return setErrorText(data.error)\n            }\n            console.log(data);\n            window.localStorage.setItem('logedUserToken', data.key)\n            setTokenValue(data.key)\n            getUserData(username)\n            .then(data => {\n                console.log(data)\n                let logedUserId = \"\"\n                for(let i = 0; i <= data.length; i++) {\n                    console.log(data[i])\n                    let ApiUsername = data[i]['username']\n                    console.log(ApiUsername)\n                    if(username.toLowerCase() ===  ApiUsername.toLowerCase()){\n                        logedUserId = data[i]['id']\n                        window.localStorage.setItem('logedUserId', logedUserId)\n                        break\n                    }\n                }\n                setUserLoggedData(data[0])\n            })\n        })\n    }\n\n    return (\n            <div className=\"login-form\"z>\n                <form className=\"login-form-form\" onSubmit={handleSubmit}>\n                    <label>\n                        <h2>User Login</h2>\n                        <p>Username</p>\n                        <input type=\"text\" onChange={e => setUserName(e.target.value)} />\n                    </label>\n                    <label>\n                        <p>Password</p>\n                        <input type=\"password\"  onChange={e => setPassword(e.target.value)}/>\n                    </label>\n                    <p> { errorText }</p>\n                    <div>\n                        <button type=\"submit\">Login</button>\n                    </div>\n                </form>\n                {tokenValue && <Navigate to=\"/\" replace={true} />}\n            </div>       \n    )\n}\n\nexport default UserLogin;\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}