{"ast":null,"code":"import { DISHES_END_POINT } from '../settings.js';\n\nconst handleErrors = async response => {\n  if (!response.ok) {\n    // console.log('response', response)\n    let errorMessage = '';\n    const ApiMessages = await response.json();\n    console.log(await ApiMessages);\n    Object.entries(ApiMessages).forEach(_ref => {\n      let [key, value] = _ref;\n      const messages = value.join('\\n');\n      errorMessage += `${key}: ${messages}\\n`;\n      console.log('errorMessage', errorMessage);\n    });\n    throw new Error(errorMessage);\n  }\n\n  return response;\n};\n\nexport default async function deleteDish(dishId, token, csfrToken) {\n  return fetch(DISHES_END_POINT + dishId + '/', {\n    method: 'DELETE',\n    headers: {\n      // 'Content-Type': 'application/json',\n      'Authorization': `Token` + token,\n      'X-CSRFToken': csfrToken\n    }\n  }).then(handleErrors).then(data => {\n    return data;\n  }).catch(error => {\n    throw error.message;\n  });\n}","map":{"version":3,"names":["DISHES_END_POINT","handleErrors","response","ok","errorMessage","ApiMessages","json","console","log","Object","entries","forEach","key","value","messages","join","Error","deleteDish","dishId","token","csfrToken","fetch","method","headers","then","data","catch","error","message"],"sources":["/frontend/menu/src/services/dish/deleteDish.js"],"sourcesContent":["import {DISHES_END_POINT} from '../settings.js';\n\nconst handleErrors = async (response) => {\n    if(!response.ok){\n        // console.log('response', response)\n        let errorMessage = ''\n        const ApiMessages = await response.json();\n        console.log(await ApiMessages)\n        Object.entries(ApiMessages).forEach(([key, value]) => {\n            const messages = value.join('\\n');\n            errorMessage += `${key}: ${messages}\\n`;\n            console.log('errorMessage', errorMessage)\n          });\n        throw new Error (errorMessage);\n    }\n    return response\n}\n\nexport default async function deleteDish(dishId, token, csfrToken,){\n    return fetch(DISHES_END_POINT + dishId + '/', {\n        method: 'DELETE',\n        headers: {\n            // 'Content-Type': 'application/json',\n            'Authorization': `Token` + token, \n            'X-CSRFToken':  csfrToken\n        },\n    })\n    .then(handleErrors)\n    .then(data => {\n        return data\n    })\n    .catch(error => {\n        throw error.message\n    })\n}"],"mappings":"AAAA,SAAQA,gBAAR,QAA+B,gBAA/B;;AAEA,MAAMC,YAAY,GAAG,MAAOC,QAAP,IAAoB;EACrC,IAAG,CAACA,QAAQ,CAACC,EAAb,EAAgB;IACZ;IACA,IAAIC,YAAY,GAAG,EAAnB;IACA,MAAMC,WAAW,GAAG,MAAMH,QAAQ,CAACI,IAAT,EAA1B;IACAC,OAAO,CAACC,GAAR,CAAY,MAAMH,WAAlB;IACAI,MAAM,CAACC,OAAP,CAAeL,WAAf,EAA4BM,OAA5B,CAAoC,QAAkB;MAAA,IAAjB,CAACC,GAAD,EAAMC,KAAN,CAAiB;MAClD,MAAMC,QAAQ,GAAGD,KAAK,CAACE,IAAN,CAAW,IAAX,CAAjB;MACAX,YAAY,IAAK,GAAEQ,GAAI,KAAIE,QAAS,IAApC;MACAP,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BJ,YAA5B;IACD,CAJH;IAKA,MAAM,IAAIY,KAAJ,CAAWZ,YAAX,CAAN;EACH;;EACD,OAAOF,QAAP;AACH,CAdD;;AAgBA,eAAe,eAAee,UAAf,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyCC,SAAzC,EAAoD;EAC/D,OAAOC,KAAK,CAACrB,gBAAgB,GAAGkB,MAAnB,GAA4B,GAA7B,EAAkC;IAC1CI,MAAM,EAAE,QADkC;IAE1CC,OAAO,EAAE;MACL;MACA,iBAAkB,OAAD,GAAUJ,KAFtB;MAGL,eAAgBC;IAHX;EAFiC,CAAlC,CAAL,CAQNI,IARM,CAQDvB,YARC,EASNuB,IATM,CASDC,IAAI,IAAI;IACV,OAAOA,IAAP;EACH,CAXM,EAYNC,KAZM,CAYAC,KAAK,IAAI;IACZ,MAAMA,KAAK,CAACC,OAAZ;EACH,CAdM,CAAP;AAeH"},"metadata":{},"sourceType":"module"}