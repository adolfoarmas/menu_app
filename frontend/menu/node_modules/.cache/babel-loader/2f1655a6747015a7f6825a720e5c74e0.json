{"ast":null,"code":"var _jsxFileName = \"/frontend/menu/src/components/ToolBar.jsx\",\n    _s = $RefreshSig$();\n\nimport styled from \"styled-components\";\nimport React, { useEffect, useContext } from \"react\";\nimport DishForm from \"./forms/DishForm\";\nimport DishCategoryForm from \"./forms/DishCategoryForm\";\nimport { CategoriesContext, Context, ToastVisibilityContext } from \"../context/userContext\";\nimport ModalHook, { useModal } from \"../hooks/modalHook\";\nimport createDishCategory from \"../services/dishCategory/createDishCategory\";\nimport createDish from \"../services/dish/createDish\";\nimport { ButtonNormal, ToolBarButton, ToolBarWrapper } from \"../styles/css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ToolBar = () => {\n  _s();\n\n  const {\n    key,\n    csfrToken\n  } = useContext(Context);\n  const [dishCategories, setDishCategories] = useContext(CategoriesContext);\n  const [toastVisible, setToastVisible, toastMessage, setToastMessage, toastType, setToastType] = useContext(ToastVisibilityContext);\n  const [userLoggedKey] = key;\n  const [csfrTokenValue] = csfrToken;\n  const newDishHook = useModal(\"Dish\");\n  const newDishCategoryHook = useModal(\"Dish Category\");\n\n  const newDishModal = () => {\n    newDishHook.changeShow();\n  };\n\n  const newDishCategoryModal = () => {\n    newDishCategoryHook.changeShow();\n  };\n\n  const displayToast = (message, type) => {\n    setToastMessage(message);\n    setToastType(type);\n    setToastVisible(true);\n  };\n\n  useEffect(() => {}, [dishCategories]); //TO REFACTOR: Unify with onSubmit in DishItem.jsx component\n\n  const onSubmitNewDish = formData => {\n    let payload = new FormData();\n    payload.append(\"name\", formData.name);\n    payload.append(\"description\", formData.description);\n    payload.append(\"category\", JSON.parse(formData.category));\n    payload.append(\"observation\", formData.observation);\n    payload.append(\"image\", formData.image);\n    payload.append(\"price\", formData.price);\n    payload.append(\"currency\", formData.currency);\n    payload.append(\"created_by\", JSON.parse(window.localStorage.getItem(\"logedUserId\")));\n    createDish(payload, userLoggedKey, csfrTokenValue).then(data => {\n      // console.log(data)\n      if (data.Error) {\n        throw data;\n      }\n\n      return data;\n    }).then(data => {\n      const categoryId = data.category;\n      const updatedCategories = dishCategories.map(category => category.id === categoryId ? { ...category,\n        dishes: [...category.dishes, data.url]\n      } : category);\n      setDishCategories(updatedCategories);\n      newDishModal();\n      displayToast('Dish \"' + String(data.name) + '\" has been created!', \"success\");\n    }).catch(data => {\n      displayToast(data, \"error\");\n    });\n  }; //TO REFACTOR: Unify with onSubmit in CategoryItem.jsx component\n\n\n  const onSubmitNewDishCategory = formData => {\n    let payload = new FormData();\n    payload.append(\"name\", formData.name);\n    payload.append(\"description\", formData.description);\n    payload.append(\"created_by\", JSON.parse(window.localStorage.getItem(\"logedUserId\")));\n    createDishCategory(payload, userLoggedKey, csfrTokenValue).then(data => {\n      // console.log(data)\n      if (data.Error) {\n        throw data;\n      }\n\n      return data;\n    }).then(data => {\n      // console.log(data)\n      const newCategory = [data];\n      setDishCategories([...dishCategories, ...newCategory]);\n      newDishCategoryModal();\n      displayToast('Category \"' + String(data.name) + '\" has been created!', \"success\");\n    }).catch(data => {\n      displayToast(data, \"error\");\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: userLoggedKey ? /*#__PURE__*/_jsxDEV(ToolBarWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(ModalHook, {\n        modalHook: newDishHook,\n        content: /*#__PURE__*/_jsxDEV(DishForm, {\n          onSubmit: onSubmitNewDish,\n          dishCategories: dishCategories\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalHook, {\n        modalHook: newDishCategoryHook,\n        content: /*#__PURE__*/_jsxDEV(DishCategoryForm, {\n          onSubmit: onSubmitNewDishCategory\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ButtonNormal, {\n        onClick: newDishModal,\n        children: \"+ Add Dish\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ButtonNormal, {\n        onClick: newDishCategoryModal,\n        children: \"+ New Dish Category\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 14\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n  }, void 0, false);\n};\n\n_s(ToolBar, \"HQwLWLIzXYQMLSyCRmR1GrMBqms=\", false, function () {\n  return [useModal, useModal];\n});\n\n_c = ToolBar;\nexport default ToolBar;\n\nvar _c;\n\n$RefreshReg$(_c, \"ToolBar\");","map":{"version":3,"names":["styled","React","useEffect","useContext","DishForm","DishCategoryForm","CategoriesContext","Context","ToastVisibilityContext","ModalHook","useModal","createDishCategory","createDish","ButtonNormal","ToolBarButton","ToolBarWrapper","ToolBar","key","csfrToken","dishCategories","setDishCategories","toastVisible","setToastVisible","toastMessage","setToastMessage","toastType","setToastType","userLoggedKey","csfrTokenValue","newDishHook","newDishCategoryHook","newDishModal","changeShow","newDishCategoryModal","displayToast","message","type","onSubmitNewDish","formData","payload","FormData","append","name","description","JSON","parse","category","observation","image","price","currency","window","localStorage","getItem","then","data","Error","categoryId","updatedCategories","map","id","dishes","url","String","catch","onSubmitNewDishCategory","newCategory"],"sources":["/frontend/menu/src/components/ToolBar.jsx"],"sourcesContent":["import styled from \"styled-components\";\nimport React, { useEffect, useContext } from \"react\";\nimport DishForm from \"./forms/DishForm\";\nimport DishCategoryForm from \"./forms/DishCategoryForm\";\nimport {\n  CategoriesContext,\n  Context,\n  ToastVisibilityContext,\n} from \"../context/userContext\";\nimport ModalHook, { useModal } from \"../hooks/modalHook\";\nimport createDishCategory from \"../services/dishCategory/createDishCategory\";\nimport createDish from \"../services/dish/createDish\";\nimport {ButtonNormal, ToolBarButton, ToolBarWrapper, } from \"../styles/css\"\n\nconst ToolBar = () => {\n  const { key, csfrToken } = useContext(Context);\n  const [dishCategories, setDishCategories] = useContext(CategoriesContext);\n  const [toastVisible, setToastVisible, toastMessage, setToastMessage, toastType, setToastType,] = useContext(ToastVisibilityContext);\n  const [userLoggedKey] = key;\n  const [csfrTokenValue] = csfrToken;\n\n  const newDishHook = useModal(\"Dish\");\n  const newDishCategoryHook = useModal(\"Dish Category\");\n\n  const newDishModal = () => {\n    newDishHook.changeShow();\n  };\n\n  const newDishCategoryModal = () => {\n    newDishCategoryHook.changeShow();\n  };\n\n  const displayToast = (message, type) => {\n    setToastMessage(message);\n    setToastType(type);\n    setToastVisible(true);\n  };\n\n  useEffect(() => {}, [dishCategories]);\n\n  //TO REFACTOR: Unify with onSubmit in DishItem.jsx component\n  const onSubmitNewDish = (formData) => {\n    let payload = new FormData();\n    payload.append(\"name\", formData.name);\n    payload.append(\"description\", formData.description);\n    payload.append(\"category\", JSON.parse(formData.category));\n    payload.append(\"observation\", formData.observation);\n    payload.append(\"image\", formData.image);\n    payload.append(\"price\", formData.price);\n    payload.append(\"currency\", formData.currency);\n    payload.append(\n      \"created_by\",\n      JSON.parse(window.localStorage.getItem(\"logedUserId\"))\n    );\n\n    createDish(payload, userLoggedKey, csfrTokenValue)\n      .then((data) => {\n        // console.log(data)\n        if (data.Error) {\n          throw data;\n        }\n        return data;\n      })\n      .then((data) => {\n        const categoryId = data.category;\n        const updatedCategories = dishCategories.map((category) =>\n          category.id === categoryId\n            ? {\n                ...category,\n                dishes: [...category.dishes, data.url],\n              }\n            : category\n        );\n        setDishCategories(updatedCategories);\n        newDishModal();\n        displayToast(\n          'Dish \"' + String(data.name) + '\" has been created!',\n          \"success\"\n        );\n      })\n      .catch((data) => {\n        displayToast(data, \"error\");\n      });\n  };\n\n  //TO REFACTOR: Unify with onSubmit in CategoryItem.jsx component\n  const onSubmitNewDishCategory = (formData) => {\n    let payload = new FormData();\n    payload.append(\"name\", formData.name);\n    payload.append(\"description\", formData.description);\n    payload.append(\n      \"created_by\",\n      JSON.parse(window.localStorage.getItem(\"logedUserId\"))\n    );\n    createDishCategory(payload, userLoggedKey, csfrTokenValue)\n      .then((data) => {\n        // console.log(data)\n        if (data.Error) {\n          throw data;\n        }\n        return data;\n      })\n      .then((data) => {\n        // console.log(data)\n        const newCategory = [data];\n        setDishCategories([...dishCategories, ...newCategory]);\n        newDishCategoryModal();\n        displayToast(\n          'Category \"' + String(data.name) + '\" has been created!',\n          \"success\"\n        );\n      })\n      .catch((data) => {\n        displayToast(data, \"error\");\n      });\n  };\n\n  return (\n    <>\n        {userLoggedKey? \n            (<ToolBarWrapper>\n        <ModalHook\n            modalHook={newDishHook}\n            content={\n            <DishForm\n                onSubmit={onSubmitNewDish}\n                dishCategories={dishCategories}\n            />\n            }\n        />\n        <ModalHook\n            modalHook={newDishCategoryHook}\n            content={<DishCategoryForm onSubmit={onSubmitNewDishCategory} />}\n        />\n        <ButtonNormal onClick={newDishModal}>\n            + Add Dish\n        </ButtonNormal>\n        <ButtonNormal onClick={newDishCategoryModal}>\n            + New Dish Category\n        </ButtonNormal>\n        </ToolBarWrapper>) : (<></>)}\n    </>\n    )\n\n}\n\nexport default ToolBar;"],"mappings":"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"},"metadata":{},"sourceType":"module"}