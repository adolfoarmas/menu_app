{"ast":null,"code":"import { USER_LOGOUT_END_POINT } from \"./settings.js\";\n\nconst handleErrors = response => {\n  if (!response.ok) {\n    return {\n      'error': response.statusText\n    };\n  }\n\n  return response;\n};\n\nexport default async function logoutUser(userLogged) {\n  var _document$cookie$spli;\n\n  const csrftokenValue = (_document$cookie$spli = document.cookie.split('; ').find(row => row.startsWith('csrftoken='))) === null || _document$cookie$spli === void 0 ? void 0 : _document$cookie$spli.split('=')[1];\n  return fetch(USER_LOGOUT_END_POINT, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Token` + userLogged,\n      'X-CSRFToken': csrftokenValue\n    },\n    body: JSON.stringify()\n  }).then(handleErrors).then(data => {\n    if (!data.error) {\n      window.localStorage.removeItem('logedUserToken');\n      window.localStorage.removeItem('logedUserId');\n      window.localStorage.removeItem('userLoggedName');\n      document.cookie = \"sessionid=; Max-Age=0;secure; path=/\";\n      document.cookie = \"csrftoken=; Max-Age=0;secure; path=/\";\n      return data.json();\n    }\n\n    return data;\n  });\n}","map":{"version":3,"names":["USER_LOGOUT_END_POINT","handleErrors","response","ok","statusText","logoutUser","userLogged","csrftokenValue","document","cookie","split","find","row","startsWith","fetch","method","headers","body","JSON","stringify","then","data","error","window","localStorage","removeItem","json"],"sources":["/home/adolfo/menu_app/frontend/menu/src/services/logoutUser.js"],"sourcesContent":["import {USER_LOGOUT_END_POINT} from \"./settings.js\"\n\nconst handleErrors = (response) => {\n    if(!response.ok){\n        return {'error': response.statusText}\n    }\n    return response\n}\n\nexport default async function logoutUser(userLogged){\n\nconst csrftokenValue = document.cookie\n    .split('; ')\n    .find((row) => row.startsWith('csrftoken='))\n    ?.split('=')[1];\n\nreturn fetch(USER_LOGOUT_END_POINT, {\n    method: 'POST',\n    headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Token` + userLogged,\n        'X-CSRFToken': csrftokenValue\n    },\n    body: JSON.stringify()\n})\n.then(handleErrors)\n.then(data => {\n    if(!data.error){\n        window.localStorage.removeItem('logedUserToken')\n        window.localStorage.removeItem('logedUserId')\n        window.localStorage.removeItem('userLoggedName')\n        document.cookie = \"sessionid=; Max-Age=0;secure; path=/\"\n        document.cookie = \"csrftoken=; Max-Age=0;secure; path=/\"\n        return data.json()\n    }\n    return data\n    })\n}"],"mappings":"AAAA,SAAQA,qBAAR,QAAoC,eAApC;;AAEA,MAAMC,YAAY,GAAIC,QAAD,IAAc;EAC/B,IAAG,CAACA,QAAQ,CAACC,EAAb,EAAgB;IACZ,OAAO;MAAC,SAASD,QAAQ,CAACE;IAAnB,CAAP;EACH;;EACD,OAAOF,QAAP;AACH,CALD;;AAOA,eAAe,eAAeG,UAAf,CAA0BC,UAA1B,EAAqC;EAAA;;EAEpD,MAAMC,cAAc,4BAAGC,QAAQ,CAACC,MAAT,CAClBC,KADkB,CACZ,IADY,EAElBC,IAFkB,CAEZC,GAAD,IAASA,GAAG,CAACC,UAAJ,CAAe,YAAf,CAFI,CAAH,0DAAG,sBAGjBH,KAHiB,CAGX,GAHW,EAGN,CAHM,CAAvB;EAKA,OAAOI,KAAK,CAACd,qBAAD,EAAwB;IAChCe,MAAM,EAAE,MADwB;IAEhCC,OAAO,EAAE;MACL,gBAAgB,kBADX;MAEL,iBAAkB,OAAD,GAAUV,UAFtB;MAGL,eAAeC;IAHV,CAFuB;IAOhCU,IAAI,EAAEC,IAAI,CAACC,SAAL;EAP0B,CAAxB,CAAL,CASNC,IATM,CASDnB,YATC,EAUNmB,IAVM,CAUDC,IAAI,IAAI;IACV,IAAG,CAACA,IAAI,CAACC,KAAT,EAAe;MACXC,MAAM,CAACC,YAAP,CAAoBC,UAApB,CAA+B,gBAA/B;MACAF,MAAM,CAACC,YAAP,CAAoBC,UAApB,CAA+B,aAA/B;MACAF,MAAM,CAACC,YAAP,CAAoBC,UAApB,CAA+B,gBAA/B;MACAjB,QAAQ,CAACC,MAAT,GAAkB,sCAAlB;MACAD,QAAQ,CAACC,MAAT,GAAkB,sCAAlB;MACA,OAAOY,IAAI,CAACK,IAAL,EAAP;IACH;;IACD,OAAOL,IAAP;EACC,CApBE,CAAP;AAqBC"},"metadata":{},"sourceType":"module"}